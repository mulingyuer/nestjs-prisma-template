import{_ as s,c as i,o as a,a5 as n}from"./chunks/framework.ntVCDD8b.js";const o=JSON.parse('{"title":"日志管理","description":"","frontmatter":{},"headers":[],"relativePath":"core-features/logger.md","filePath":"core-features/logger.md"}'),h={name:"core-features/logger.md"},l=n(`<h1 id="日志管理" tabindex="-1">日志管理 <a class="header-anchor" href="#日志管理" aria-label="Permalink to &quot;日志管理&quot;">​</a></h1><p>在Node中日志的记录有传统的日志管理模块如winston，我个人也用过，但是相对来说有些麻烦，第一是需要自己去手动填写需要记录的内容，第二是插件自身的配置繁琐，经常回头就忘了怎怎么使用。</p><p>在比对了一些日志插件后，我选择了<a href="https://github.com/pinojs/pino" target="_blank" rel="noreferrer">Pino</a>作为日志管理工具。</p><p>第一是它的NestJS插件直接对接了NestJS的日志系统，第二是它的配置简单，不需要太多的配置项就可以使用。</p><p>当然，pino也有很蛋疼的地方，就是它的日志文件名没法自定义，他不能像winston那样可以根据日期自动生成日志文件名，这点是挺难受的，但是它的默认配置实在是太适合新手了，我根本不需要告诉它具体记录哪些内容，它自己会记录很多东西。</p><p>就这点，让我觉得pino真的很好用，因为作为一个入门级的全栈开发，我们往往不太明确需要记录哪些日志内容，如果全靠自己定制，肯定会有漏记的情况，我个人使用winston碰到了好几次在查看日志的时候没有找到自己想要的东西，pino则没有这个烦恼。</p><h2 id="记录日志" tabindex="-1">记录日志 <a class="header-anchor" href="#记录日志" aria-label="Permalink to &quot;记录日志&quot;">​</a></h2><p>这里以<code>RequestService</code>为例，记录请求日志。</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">// RequestService.ts</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">import</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> { </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">Injectable</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">InternalServerErrorException</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">Logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> } </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">from</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;@nestjs/common&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">;</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">import</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;"> axios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, { </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">AxiosError</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> } </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">from</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;axios&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">;</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">import</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> type</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> { </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">AxiosInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">AxiosRequestConfig</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> } </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">from</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;axios&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">@</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">Injectable</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">()</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">export</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> class</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> RequestService</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> private</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> readonly</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;"> logger</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;"> =</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> new</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> Logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">RequestService</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> private</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;"> axiosInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> AxiosInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> constructor</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">() {</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">  this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">initAxios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">();</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;"> /** 初始化axios */</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> private</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> initAxios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">() {</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">  this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">axiosInstance</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;"> =</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;"> axios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">create</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">({</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">   timeout</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;"> 30</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;"> *</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;"> 1000</span><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;"> // 30s</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">  // 请求前拦截器</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">  this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">axiosInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">interceptors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">use</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">((</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;--shiki-dark-font-style:italic;--shiki-light-font-style:inherit;">config</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">) </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">=&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">   // 日志</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">   this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">config</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;请求准备发送&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">   return</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;"> config</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">  // 响应拦截器</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">  this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">axiosInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">interceptors</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">use</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">   (</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;--shiki-dark-font-style:italic;--shiki-light-font-style:inherit;">response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">) </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">=&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // 日志</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">    this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;请求成功响应&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // 根据项目情况做解包处理</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">    return</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;"> response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">data</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">   },</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">   (</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;--shiki-dark-font-style:italic;--shiki-light-font-style:inherit;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">) </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">=&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // 请求被取消</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">    if</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> (</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">axios</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">isCancel</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">)) {</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">     this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">\`请求被取消: </span><span style="--shiki-dark:#C678DD;--shiki-light:#CA1243;">\${</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#50A14F;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">message</span><span style="--shiki-dark:#C678DD;--shiki-light:#CA1243;">}</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">\`</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">     return</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> Promise</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">reject</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">new</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> InternalServerErrorException</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">message</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">));</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // 日志</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">    this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">\`请求发生错误\`</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // AxiosError</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">    if</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> (</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> instanceof</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> AxiosError</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">) {</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     /**</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      * 异常响应</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      * {</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      *  &quot;status&quot;: &quot;error&quot;,</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      *  &quot;user_id&quot;: model.user_id,</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      *  &quot;task_id&quot;: model.task_id,</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      *  &quot;message&quot;: &quot;error message&quot;</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      * }</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">      */</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">     return</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> Promise</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">reject</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">      new</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> InternalServerErrorException</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">response</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">?.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">data</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">?.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">message</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;"> ??</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;"> error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">message</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">)</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">     );</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // Error</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">    if</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> (</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;"> instanceof</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> Error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">) {</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">     return</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> Promise</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">reject</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">new</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> InternalServerErrorException</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">message</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">));</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    // 其他</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">    return</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> Promise</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">reject</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">new</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> InternalServerErrorException</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;未知错误&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">));</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">   }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">  );</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;"> /** 通用请求 */</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> request</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;">T</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">&gt;(</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;--shiki-dark-font-style:italic;--shiki-light-font-style:inherit;">options</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> AxiosRequestConfig</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">)</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;"> Promise</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">&lt;</span><span style="--shiki-dark:#E5C07B;--shiki-light:#C18401;">T</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">&gt; {</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">  return</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;"> this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">axiosInstance</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">options</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div><p>我们需要先从<code>&quot;@nestjs/common&quot;</code>引入<code>Logger</code>类，因为pino已经代理了NestJS的日志系统，所以我们可以直接引入Nest提供的Logger。</p><p>引入后在服务中new出Logger实例，需要传入一个参数，常见的就是当前类的类名，这个参数会在日志的<code>context</code>字段中显示，方便我们区分日志的来源。</p><p>如果你只需要记录文字消息，可以直接这样：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;Hello, world!&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>如果你需要记录对象，可以这样：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">log</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">({ </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">name</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;John&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">age</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;"> 30</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> }, </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;错误信息&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>对象必须作为第一个参数传入，第二个参数是可选的，用于描述日志的具体内容。</p><h2 id="日志内容示例" tabindex="-1">日志内容示例 <a class="header-anchor" href="#日志内容示例" aria-label="Permalink to &quot;日志内容示例&quot;">​</a></h2><div class="language-log vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">log</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">{</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;level&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">30</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;time&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;2024-08-26T13:09:53&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;pid&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">29832</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;hostname&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;DESKTOP-C5IR9G5&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;req&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:{</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;id&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">1</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;method&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;GET&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;url&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;/api&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;query&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:{},</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;params&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:{},</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;headers&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:{</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;host&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;localhost:3000&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;connection&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;keep-alive&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;cache-control&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;max-age=0&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-ch-ua&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;\\&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">Not)A;Brand\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;;v=\\&quot;</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">99</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;, \\&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">Google Chrome\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;;v=\\&quot;</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">127</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;, \\&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">Chromium\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;;v=\\&quot;</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">127</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-ch-ua-mobile&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;?0&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-ch-ua-platform&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;\\&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">Windows\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;dnt&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;upgrade-insecure-requests&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;user-agent&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;accept&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-fetch-site&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;none&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-fetch-mode&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;navigate&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-fetch-user&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;?1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;sec-fetch-dest&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;document&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;accept-encoding&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;gzip, deflate, br, zstd&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;accept-language&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6,en-AU;q=0.5,sw;q=0.4,my;q=0.3&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;if-none-match&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;W/\\&quot;</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">35</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">-hlfSjEhGaDmWCNiGmPC4EufOiZ8\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">},</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;remoteAddress&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;::1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;remotePort&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">60715</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">},</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;context&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;HTTP&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;res&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:{</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;statusCode&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">304</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;headers&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:{</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;cross-origin-opener-policy&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;same-origin&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;cross-origin-resource-policy&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;cross-origin&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;origin-agent-cluster&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;?1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;referrer-policy&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;no-referrer&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;strict-transport-security&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;max-age=15552000; includeSubDomains&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;x-content-type-options&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;nosniff&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;x-dns-prefetch-control&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;off&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;x-download-options&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;noopen&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;x-frame-options&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;SAMEORIGIN&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;x-permitted-cross-domain-policies&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;none&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;x-xss-protection&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;0&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;access-control-allow-origin&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;*&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;etag&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;W/\\&quot;</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">35</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">-hlfSjEhGaDmWCNiGmPC4EufOiZ8\\</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">}},</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;responseTime&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">7</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;msg&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;request completed&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>使用json格式化后：</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">{</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;level&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">30</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;time&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;2024-08-26T13:09:53&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;pid&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">29832</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;hostname&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;DESKTOP-C5IR9G5&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;req&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;id&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">1</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;method&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;GET&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;url&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;/api&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;query&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {},</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;params&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {},</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;headers&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;host&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;localhost:3000&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;connection&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;keep-alive&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;cache-control&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;max-age=0&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-ch-ua&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">Not)A;Brand</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">;v=</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">99</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">, </span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">Google Chrome</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">;v=</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">127</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">, </span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">Chromium</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">;v=</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">127</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-ch-ua-mobile&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;?0&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-ch-ua-platform&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">Windows</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;dnt&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;upgrade-insecure-requests&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;user-agent&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/127.0.0.0 Safari/537.36&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;accept&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-fetch-site&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;none&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-fetch-mode&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;navigate&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-fetch-user&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;?1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;sec-fetch-dest&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;document&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;accept-encoding&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;gzip, deflate, br, zstd&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;accept-language&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7,de;q=0.6,en-AU;q=0.5,sw;q=0.4,my;q=0.3&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;if-none-match&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;W/</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">35-hlfSjEhGaDmWCNiGmPC4EufOiZ8</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">        },</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;remoteAddress&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;::1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;remotePort&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">60715</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">    },</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;context&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;HTTP&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;res&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;statusCode&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">304</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        &quot;headers&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;cross-origin-opener-policy&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;same-origin&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;cross-origin-resource-policy&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;cross-origin&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;origin-agent-cluster&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;?1&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;referrer-policy&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;no-referrer&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;strict-transport-security&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;max-age=15552000; includeSubDomains&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;x-content-type-options&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;nosniff&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;x-dns-prefetch-control&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;off&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;x-download-options&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;noopen&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;x-frame-options&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;SAMEORIGIN&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;x-permitted-cross-domain-policies&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;none&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;x-xss-protection&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;0&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;access-control-allow-origin&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;*&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">            &quot;etag&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;W/</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">35-hlfSjEhGaDmWCNiGmPC4EufOiZ8</span><span style="--shiki-dark:#56B6C2;--shiki-light:#0184BC;">\\&quot;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">        }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">    },</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;responseTime&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">7</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    &quot;msg&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;request completed&quot;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><p>可以看到，日志中包含了请求的相关信息，包括请求的url、method、headers、query、params等。</p><p>不同的日志记录信息是不同的，但是总体来说pino帮我们记录了很多有用的信息，而且还不需要自己手动配置记录的内容有哪些。</p><h2 id="日志等级" tabindex="-1">日志等级 <a class="header-anchor" href="#日志等级" aria-label="Permalink to &quot;日志等级&quot;">​</a></h2><p>pino有六个等级的日志：</p><ul><li>fatal (60): 严重错误，应用程序将会退出</li><li>error (50): 错误事件</li><li>warn (40): 警告信息</li><li>info (30): 常规信息（默认）</li><li>debug (20): 调试信息</li><li>trace (10): 跟踪信息</li></ul><p>方法对应关系如下：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">fatal</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;致命错误&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">error</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;错误事件&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">warn</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;警告信息&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">info</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;常规信息&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">debug</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;调试信息&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span>
<span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">this</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#E5C07B;--shiki-light:#E45649;">logger</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">trace</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;跟踪信息&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>默认情况下，在开发模式<code>NODE_ENV=&quot;development&quot;</code>时，pino会记录<code>trace</code>及以上级别的日志，在生产模式下只会记录<code>info</code>及以上级别的日志。</p><p>如果你需要修改这个行为，找到<code>src\\shared\\shared.module.ts</code>模块的<code>LoggerModule</code>，自行调整<code>level</code>属性。</p><h2 id="日志文件" tabindex="-1">日志文件 <a class="header-anchor" href="#日志文件" aria-label="Permalink to &quot;日志文件&quot;">​</a></h2><p>在开发模式下，pino会将日志输出到控制台，而在生产模式下，日志会输出到文件中。</p><p>具体配置如下：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">{</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  target</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;pino-roll&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  options</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  file</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">joinRootPath</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;/logs/pino&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">),</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  frequency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;daily&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  size</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;10M&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  mkdir</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;">true</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;">  extension</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">: </span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;.log&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">  }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>如果没有什么特殊需求，默认这套配置就可以了。</p><p>它会将日志输出到项目下的logs目录，文件名为<code>pino.1.log</code>，如果文件大小超过10M，会自动生成新的日志文件<code>pino.2.log</code>，以此类推。</p><p>然后文件会进行一个自动流转，<code>frequency: &quot;daily&quot;</code>表示每天生成一个新的日志文件，如果size超出大小也会自动生成新的日志文件。</p><h2 id="日志配置" tabindex="-1">日志配置 <a class="header-anchor" href="#日志配置" aria-label="Permalink to &quot;日志配置&quot;">​</a></h2><p>pino的配置项比较简单，它写在<code>src\\shared\\shared.module.ts</code>模块里的<code>LoggerModule</code>中，如下：</p><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes one-dark-pro one-light vp-code" tabindex="0"><code><span class="line"><span style="--shiki-dark:#E5C07B;--shiki-light:#383A42;">LoggerModule</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">.</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">forRoot</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">({</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">   pinoHttp</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">    /**</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     * fatal (60): 严重错误，应用程序将会退出</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     * error (50): 错误事件</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     * warn (40): 警告信息</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     * info (30): 常规信息（默认）</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     * debug (20): 调试信息</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     * trace (10): 跟踪信息</span></span>
<span class="line"><span style="--shiki-dark:#7F848E;--shiki-light:#A0A1A7;--shiki-dark-font-style:italic;--shiki-light-font-style:italic;">     */</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    level</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;"> isDev</span><span style="--shiki-dark:#C678DD;--shiki-light:#0184BC;"> ?</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;trace&quot;</span><span style="--shiki-dark:#C678DD;--shiki-light:#0184BC;"> :</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;info&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">    customProps</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> (</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;--shiki-dark-font-style:italic;--shiki-light-font-style:inherit;">_req</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">, </span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;--shiki-dark-font-style:italic;--shiki-light-font-style:inherit;">_res</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">) </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">=&gt;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> ({</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">     context</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;HTTP&quot;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">    }),</span></span>
<span class="line"><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">    timestamp</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> () </span><span style="--shiki-dark:#C678DD;--shiki-light:#A626A4;">=&gt;</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> \`,&quot;time&quot;:&quot;</span><span style="--shiki-dark:#C678DD;--shiki-light:#CA1243;">\${</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;">getLogTime</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">()</span><span style="--shiki-dark:#C678DD;--shiki-light:#CA1243;">}</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;\`</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">    transport</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#E06C75;--shiki-light:#383A42;"> isDev</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0184BC;">     ?</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">       target</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;pino-pretty&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">       options</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        singleLine</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;"> true</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">       }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">      }</span></span>
<span class="line"><span style="--shiki-dark:#C678DD;--shiki-light:#0184BC;">     :</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">       target</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;pino-roll&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">       options</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;"> {</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        file</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#61AFEF;--shiki-light:#4078F2;"> joinRootPath</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">(</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;">&quot;/logs/pino&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">),</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        frequency</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;daily&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        size</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;10M&quot;</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        mkdir</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#D19A66;--shiki-light:#986801;"> true</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">,</span></span>
<span class="line"><span style="--shiki-dark:#E06C75;--shiki-light:#E45649;">        extension</span><span style="--shiki-dark:#ABB2BF;--shiki-light:#0184BC;">:</span><span style="--shiki-dark:#98C379;--shiki-light:#50A14F;"> &quot;.log&quot;</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">       }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">      }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">   }</span></span>
<span class="line"><span style="--shiki-dark:#ABB2BF;--shiki-light:#383A42;">  })</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p><code>pino-pretty</code>用于在开发模式下输出日志到控制台，<code>pino-roll</code>用于在生产模式下输出日志到文件。</p>`,40),t=[l];function k(p,e,r,B,A,d){return a(),i("div",null,t)}const y=s(h,[["render",k]]);export{o as __pageData,y as default};
